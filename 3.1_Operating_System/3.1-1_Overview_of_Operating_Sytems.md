# 3.1-1 Overview of Operating Systems

> Active recall
> 
> - In one sentence, what does an operating system (OS) do? (focus on its two main roles)
> - What is the relationship between the resources an OS manages and the abstractions it provides on top of them?
> - What are the respective roles of the **kernel** and **system utilities**?
> - What is the main reason an OS uses dual mode (user mode / kernel mode)?
> - What is a **system call**, and why must user programs go through it?
> - How do **interrupts/traps** plus **context switching** together create the illusion that processes are “running at the same time”?

---

## What Is an Operating System?

### Operating System (OS)

An operating system is a program that sits directly on top of the computer hardware and connects **users and all other software** to the **hardware**.

> One-line summary: OS = resource manager + abstraction provider
> 
- **Resources**
    - CPU, memory, disks, network, and I/O devices
- **Abstraction**
    - Provides “easy-to-use fake interfaces” such as **files, processes, and sockets**
        
        to hide the complex behavior of hardware and present it in a simpler form.
        

---

## Kernel and System Utilities

What we usually call an “operating system” typically includes:

**the kernel + various system utility programs**.

### Kernel

- The part of the OS that contains the **core logic for resource management**:
    
    **process management, memory management, file systems, I/O, networking**, etc.
    
- It always resides in memory and runs only in **kernel mode**.
- It is the **privileged code area** that can directly access hardware.

### System Utilities

System utilities are **regular user-mode programs** that run on top of the kernel and help users make convenient use of the OS.

- They provide **user interfaces and convenience features**.
- Examples:
    - **Shell, CLI, terminal**: accept commands and launch programs
    - **GUI environment**: windows/icons/mouse and other graphical interfaces
    - **File management utilities**: `ls`, `cp`, `mv`, file explorer, etc.
    - **System management tools**: Task Manager, `top`, `ps`, `systemctl`, etc.
    - **Package managers**: `apt`, `yum`, `pacman`, `brew`, etc.

---

## Dual Mode and System Calls

The OS prevents applications from accessing hardware resources **directly**,

and forces them to **always go through the OS**, in order to protect resources.

> Goal: protect the OS and other programs + centralize resource control + ensure stability/security/multitasking
> 

### Dual Mode

The CPU distinguishes between **user mode** and **kernel mode** when executing instructions.

(The hardware uses a **mode bit** to separate these two modes.)

- **User mode**
    - Cannot execute **dangerous (privileged) instructions**
    - Cannot directly access I/O devices such as disks, network cards, timers
    - Can only access memory **within the range allowed by the OS** (enforced by the MMU and page tables)
- **Kernel mode**
    - Can execute privileged instructions
    - Can directly access memory and I/O devices
        
        → **“Dangerous operations” are always performed only in kernel mode.**
        

> Examples of privileged instructions
> 
> - Modifying page tables
> - Setting up timers
> - Issuing raw disk I/O commands
> - Enabling/disabling interrupts

### System Call

A **system call** is an interface through which a user program requests a transition

from user mode to kernel mode in order to use OS functionality.

- Examples: `read`, `write`, `open`, `fork`, `exec`, `socket`, …
- Flow:
    1. A user program issues a system call (causing a software interrupt/trap).
    2. The CPU switches from **user mode → kernel mode**.
    3. The kernel handles the request (e.g., open a file, allocate memory, create a socket).
    4. When the work is done, the CPU switches from **kernel mode → user mode**, and the program continues.

> In general, the user runs applications in user mode,
> 
> 
> and **enters kernel mode only when OS services are needed via a system call, then returns to user mode**.
> 

---

## Interrupts, Traps, and Context Switching

### Interrupt

- A signal from hardware/external devices to wake up the CPU and say
    
    **“Hey OS, please handle this.”**
    
- Examples:
    - Disk I/O completion interrupt
    - Timer interrupt (time slice expired, scheduling needed)

### Trap

- A **software-generated interrupt** that occurs within a program.
- Examples:
    - **System calls** (explicitly calling into the kernel)
    - **Exceptions**: division by zero, invalid memory access, etc.

### Context Switch

- When the CPU switches its execution from **process A → process B**,
- It saves and restores the CPU state such as **registers, program counter, status registers**, etc.
- Through this process, multiple processes can **take turns using a single CPU**, making it look as if they are running simultaneously.

---

## Core Services of an Operating System

An OS mainly provides **process management, resource management (CPU/memory/I/O), and file system management**.

### Process Management

- **Process**
    
    A process is the **unit of execution**: a running program plus the resources it needs
    
    (memory, files, CPU time, etc.).
    
- The OS creates and terminates processes, manages their states,
    
    and allocates CPU time among them.
    

### Resource Access and Allocation

- **CPU scheduling**
    - Decides **which process gets the CPU** and when.
- **Memory management**
    - Decides **where and how much memory** to allocate for each process.
    - Includes logical ↔ physical address mapping and virtual memory management.
- **I/O management**
    - Uses interrupts and **device drivers** to send and receive data
        
        to/from devices like keyboards, disks, and network cards.
        
    - Also manages I/O request queues, buffering, caching, etc.

### File System Management

- A **file** is an **OS abstraction** for handling data stored on a disk.
- The OS:
    - Creates, deletes, opens, and closes files
    - Manages directory structures
    - Manages access permissions
        
        and so on.
        

---

## Types and Examples of Operating Systems

Representative operating systems include:

- **Linux, Windows, macOS, Android, iOS**
    - **Common features**
        - Manage processes/threads/files/memory
        - Provide a system call interface
    - **Differences**
        - Kernel structure (monolithic, hybrid, etc.), licenses,
            
            supported hardware, user environment, default utilities, and more
            
    - **Linux and Android**
        - Both are based on the **Linux kernel**.
        - Linux is a representative **open-source operating system**.
        - Android also uses the Linux kernel, and many of its components are open source.
